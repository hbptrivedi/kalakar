webpackJsonp([36,55],{906:function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e){return{changeRoute:function(t){return e(a.i(u.push)(t))}}}var s=a(1),l=s&&s.__esModule?function(){return s["default"]}:function(){return s};a.d(l,"a",l);var c=a(345),p=c&&c.__esModule?function(){return c["default"]}:function(){return c};a.d(p,"a",p);var u=a(151),d=u&&u.__esModule?function(){return u["default"]}:function(){return u};a.d(d,"a",d);var h=a(97),f=h&&h.__esModule?function(){return h["default"]}:function(){return h};a.d(f,"a",f);var v=a(96),m=a(950),g=a(346),b=g&&g.__esModule?function(){return g["default"]}:function(){return g};a.d(b,"a",b);var y=a(108),w=y&&y.__esModule?function(){return y["default"]}:function(){return y};a.d(w,"a",w);var T=a(949),x=T&&T.__esModule?function(){return T["default"]}:function(){return T};a.d(x,"a",x);var C=a(107),D=C&&C.__esModule?function(){return C["default"]}:function(){return C};a.d(D,"a",D);var k=a(976),P=a(930);a.d(t,"Media",function(){return W});var _=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,a,o,i){var n=t&&t.defaultProps,r=arguments.length-3;if(a||0===r||(a={}),a&&n)for(var s in n)void 0===a[s]&&(a[s]=n[s]);else a||(a=n||{});if(1===r)a.children=i;else if(r>1){for(var l=Array(r),c=0;c<r;c++)l[c]=arguments[c+3];a.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:a,_owner:null}}}(),B=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),O=a(150),S=_("span",{className:"fa fa-check"}),M=_("span",{className:"fa fa-rotate-left"}),N=_("span",{className:"fa fa-rotate-right"}),L=_("div",{className:"bigLoader"},void 0,_("i",{},void 0,_("img",{src:"https://kalakar.pro/kalakar/demo/other/assets/img/loader.svg"})),"Loading......."),R=_("div",{className:"col-md-12 col-sm-12 col-xs-12"},void 0,_("h1",{},void 0,"STEP 4 - MEDIA")),I=_("div",{className:"photo-block"},void 0,_("div",{className:"photo-block__img"},void 0,_("div",{className:"upload"},void 0,_("span",{className:"fileUploadBtn"},void 0,_("a",{href:"javascript:void(0);"},void 0,"+"))))),E=_("div",{className:"col-md-12 col-sm-12 col-xs-12"},void 0,_("span",{className:"dragTitle"},void 0," Uploaded Media - Drag and Drop To Determine Order")),j=_("span",{className:"fa fa-times"}),W=function(e){function t(e){o(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,e));return a.openRoute=function(e){a.props.changeRoute(e)},a.handleClosePhoto=function(){a.setState({photoOpen:!1})},a.state={videoURL:"",mediaData:[],user_id:f.a.load("userId"),croperstate:!1,IMGSrc:"",uploadingImg:"",Message:"",photoUrl:"",open:!1,imgTags:"",Filename:"",picState:"",tagError:"",Loader:!1,IsMobile:0,photoSrc:"",disabled:!0,photoOpen:!1},a}return n(t,e),B(t,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname,t=e.split("/Media/");this.setState({pid:t[1],Loader:!0});var a={action:"projectsMedia",PID:t[1]},o=this;O.getSetData(a,function(e){"success"==e.status&&null!=e.data?o.setState({mediaData:e.data,Loader:!1}):o.setState({Loader:!1})})}},{key:"handleImageChange",value:function(e){var t=this;e.preventDefault();var a=new FileReader,o=e.target.files[0];a.onloadend=function(){t.setState({croperstate:!0,IMGSrc:a.result,Filename:o.name})},a.readAsDataURL(o)}},{key:"handleValidation",value:function(e){return""!=this.state.title||(this.setState({requiredFlag:!0}),e.preventDefault(),!1)}},{key:"handleOpenPhoto",value:function(e,t){t.setState({photoOpen:!0,dtid:e})}},{key:"deletePhoto",value:function(e){var t={action:"deleteMedia",MID:e.state.dtid};O.getSetData(t,function(t){"success"==t.status&&(e.setState({Loader:!1}),e.handleClosePhoto(),e.mediaComponent())})}},{key:"addVideo",value:function(){var e=this,t={action:"createThumbnail",type:"video",PID:this.state.pid,userId:f.a.load("userId"),videoUrl:this.state.videoURL,origin:"media",Tags:""},e=this;O.getSetData(t,function(t){"success"==t.status&&null!=t.TID&&e.setState({videoURL:""})})}},{key:"handleCloseV",value:function(){this.setState({open:!1})}},{key:"uploadImage",value:function(){if(this.valdatetag()){var e=this.refs.cropper.getCroppedCanvas().toDataURL();this.setState({croperstate:!1,picState:1,uploadingImg:e,Loader:!0});var t=this,a=this.state.user_id,o={action:"createThumbnail",type:"photo",PID:this.state.pid,userId:a,img:e,origin:"media",Tags:this.state.imgTags};O.getSetData(o,function(e){if("success"==e.status){var a={action:"projectsMedia",PID:t.state.pid};O.getSetData(a,function(e){"success"==e.status&&null!=e.data&&t.setState({mediaData:e.data,picState:2,uploadingImg:"",imgTags:"",Loader:!1})})}else t.setState({picState:3,Message:e.message,Loader:!1})})}}},{key:"handleInputChange1",value:function(e,t){this.setState({albumtag:t.target.value})}},{key:"handleOpenV",value:function(e){this.handleValidation(e)&&this.setState({open:!0,confirmOpen:!1,croperstate:!1})}},{key:"RotateR",value:function(){this.refs.cropper.rotate(90)}},{key:"_crop",value:function(e){}},{key:"RotateL",value:function(){this.refs.cropper.rotate(-90)}},{key:"handleImageChange",value:function(e){var t=this;e.preventDefault();var a=new FileReader,o=e.target.files[0];a.onloadend=function(){t.setState({croperstate:!0,IMGSrc:a.result,Filename:o.name})},a.readAsDataURL(o)}},{key:"changeText",value:function(e){this.setState({imgTags:e.target.value}),this.valdatetag()}},{key:"valdatetag",value:function(){var e=!1;return""===this.state.imgTags?(this.setState({tagError:v.a.photoTag}),!1):(e=!0,this.setState({tagError:null}),e)}},{key:"handleOpen",value:function(e){this.handleValidation(e)&&this.setState({croperstate:!0})}},{key:"handleClose",value:function(){this.setState({croperstate:!1,imgTags:""})}},{key:"editTag",value:function(e){document.getElementById("tag"+e).disabled=!1,this.setState({media_id:e})}},{key:"saveTag",value:function(e){if(13==e.keyCode||void 0==e.keyCode){var t=this,a=this.state.albumtag,o=t.state.media_id,i={action:"editMediaTags",Tag:a,MID:o};O.getSetData(i,function(e){document.getElementById("tag"+o).disabled=!1,"success"==e.status&&t.setState({})})}}},{key:"mediaComponent",value:function(){this.setState({Loader:!0});var e={action:"projectsMedia",PID:this.state.pid},t=this;O.getSetData(e,function(e){"success"==e.status&&null!=e.data&&t.setState({mediaData:e.data,Loader:!1})})}},{key:"handleChange",value:function(e){var t=e.target.value;if(t.includes("youtube"))var a=t.replace("watch?v=","embed/");else if(t.includes("vimeo"))var a=t.replace("https://vimeo.com/","https://player.vimeo.com/video/");this.setState({videoURL:a})}},{key:"previous",value:function(){this.props.changeRoute("/CompletedProjects/CastAndCrew/"+this.state.pid)}},{key:"saveMedia",value:function(){var e=this;e.props.changeRoute("/my-dashboard/projects")}},{key:"render",value:function(){var e=this;return _("section",{className:"inner-page"},void 0,_(w.a,{title:v.a.UploadTitle,modal:!0,open:this.state.croperstate,className:"croperPopup",autoScrollBodyContent:!1},void 0,_("button",{onClick:this.uploadImage.bind(this),className:"uploadBtnCrop"},void 0,S),_("p",{},void 0,"(",v.a.minSize,")"),_("small",{className:"errorMsg"},void 0,this.state.tagError),_("input",{type:"text",placeholder:v.a.pTag,onBlur:this.changeText.bind(this),value:this.state.imgTags.replace(/\\/g,""),onChange:this.changeText.bind(this)}),1==this.state.IsMobile?l.a.createElement(x.a,{ref:"cropper",src:this.state.IMGSrc,style:{height:400,width:"100%"},aspectRatio:16/9,autoCropArea:.97,guides:!1,zoomable:!1}):l.a.createElement(x.a,{ref:"cropper",src:this.state.IMGSrc,style:{height:350,width:"100%"},guides:!1}),_("span",{className:"RotateBtnCropOuter"},void 0,_("button",{title:"Rotate Left",onClick:this.RotateL.bind(this),className:"RotateBtnCrop"},void 0,M),_("button",{title:"Rotate Right",onClick:this.RotateR.bind(this),className:"RotateBtnCrop"},void 0,N)),_(D.a,{className:"cancelBtnPopup",primary:!0,onTouchTap:this.handleClose.bind(this),label:"X"})),_(m.a,{page:"Media",ProjectId:this.state.pid}),_("div",{className:"pageRest cell"},void 0,_("div",{className:"Project-inner step1 step3New newStep"},void 0,_("div",{className:"row"},void 0,this.state.Loader===!0?L:"",R),_("div",{className:"projectSteps smallMedia"},void 0,_("div",{className:"row ProjectMedia"},void 0,_("div",{className:"col-md-12 col-sm-12 col-xs-12"},void 0,_("div",{className:"albums-data "},void 0,_("div",{className:"albumbSingle "},void 0,_("div",{className:"albums-data__inner",id:"photo-block1"},void 0,_("div",{className:"photo-block"},void 0,_("div",{className:"photo-block__img"},void 0,_("div",{className:"upload"},void 0,_("span",{className:"fileUploadBtn"},void 0,"+",_("input",{id:"file",type:"file",onChange:this.handleImageChange.bind(this),onClick:this.handleValidation.bind(this),accept:"image/*"}))))),_("input",{type:"text",placeholder:v.a.UploadTitle,readOnly:!0}))),_("div",{className:"albumbSingle col-md-6"},void 0,_("div",{className:"albums-data__inner",id:"photo-block1",onTouchTap:this.handleOpenV.bind(this)},void 0,I,_(k.a,{open:this.state.open,close:this.handleCloseV.bind(this),projects:"projects",PID:this.state.pid,detailvideo:this.mediaComponent.bind(this)}),_("input",{type:"text",placeholder:v.a.albumVideo,readOnly:!0}))))),E,_("div",{className:"col-xs-12"},void 0,_("div",{className:"albums-data",style:{width:"100%"}},void 0,this.state.mediaData.map(function(t,a){return _("div",{className:"albumbSingle"},a,_("div",{className:"albums-data__inner"},void 0,_("div",{className:"photo-block"},void 0,_("div",{className:"photo-block__img"},void 0,0==t.type?_("iframe",{width:"100%",height:"140px",src:t.thumbnail,frameBorder:"0",allowFullScreen:!0},void 0):_("img",{src:t.thumbnail,alt:!0,title:!0})),_("a",{className:"pic-edit",href:"javascript:void(0);",onClick:e.editTag.bind(e,t.ID)}),_("a",{href:"javascript:void(0);",title:"Delete",className:"delete",onTouchTap:e.handleOpenPhoto.bind(null,t.ID,e)},void 0,j),_("input",{type:"text",id:"tag"+t.ID,className:" editbox",placeholder:"Tag this photo, seperate tags by comma",defaultValue:t.Tags.replace(/\\/g,""),onChange:e.handleInputChange1.bind(e,a),disabled:e.state.disabled,onBlur:e.saveTag.bind(e),onKeyDown:e.saveTag.bind(e)}))))}),_(P.a,{open:this.state.photoOpen,title:v.a.delPho,body:v.a.delQ,onSubmit:this.deletePhoto.bind(null,this),onClose:this.handleClosePhoto}))))),_("div",{className:"row"},void 0,_("div",{className:"col-md-12 col-sm-12 col-xs-12"},void 0,_("button",{className:"btn-Previous",onClick:this.previous.bind(this)},void 0,"Previous"),_("button",{className:" btn-SaveNext",onClick:this.saveMedia.bind(this)},void 0,"Save"))))))}}]),t}(l.a.Component);t["default"]=a.i(c.connect)(null,r)(W)},930:function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=a(1),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(s,"a",s);var l=a(108),c=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(c,"a",c);var p=a(224),u=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(u,"a",u);var d=a(107),h=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(h,"a",h);var f=a(96);a.d(t,"a",function(){return b});var v=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,a,o,i){var n=t&&t.defaultProps,r=arguments.length-3;if(a||0===r||(a={}),a&&n)for(var s in n)void 0===a[s]&&(a[s]=n[s]);else a||(a=n||{});if(1===r)a.children=i;else if(r>1){for(var l=Array(r),c=0;c<r;c++)l[c]=arguments[c+3];a.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:a,_owner:null}}}(),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),g=v("br",{}),b=function(e){function t(){return o(this,t),i(this,Object.getPrototypeOf(t).apply(this,arguments))}return n(t,e),m(t,[{key:"render",value:function(){return v("div",{},void 0,v(c.a,{className:"pay-ads-pop tagDel",title:this.props.title,modal:!1,open:this.props.open},void 0,v("p",{},void 0,this.props.body),g,v(h.a,{label:f.a.yes,primary:!0,className:"tagDelbtn",onTouchTap:this.props.onSubmit}),v(h.a,{label:f.a.no,primary:!0,className:"tagDelbtn",onTouchTap:this.props.onClose}),v(h.a,{label:"X",primary:!0,className:"cancelBtnPopup",onTouchTap:this.props.onClose})))}}]),t}(s.a.Component)},945:function(e,t,a){var o,i;/*!
 * Cropper.js v0.5.6
 * https://github.com/fengyuanchen/cropperjs
 *
 * Copyright (c) 2015-2016 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2016-01-18T05:33:43.542Z
 */
!function(t,a){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?a(t,!0):function(e){if(!e.document)throw new Error("Cropper requires a window with a document");return a(e)}:a(t)}("undefined"!=typeof window?window:this,function(a,n){"use strict";function r(e){return et.call(e).slice(8,-1).toLowerCase()}function s(e){return"number"==typeof e&&!isNaN(e)}function l(e){return"undefined"==typeof e}function c(e){return"object"==typeof e&&null!==e}function p(e){var t,a;if(!c(e))return!1;try{return t=e.constructor,a=t.prototype,t&&a&&tt.call(a,"isPrototypeOf")}catch(o){return!1}}function u(e){return"function"===r(e)}function d(e){return Q.isArray?Q.isArray(e):"array"===r(e)}function h(e,t){return t=t>=0?t:0,Q.from?Q.from(e).slice(t):at.call(e,t)}function f(e){return"string"==typeof e&&(e=e.trim?e.trim():e.replace(Ce,"$1")),e}function v(e,t){var a,o;if(e&&u(t))if(d(e)||s(e.length))for(o=0,a=e.length;o<a&&t.call(e,e[o],o,e)!==!1;o++);else if(c(e))for(o in e)if(e.hasOwnProperty(o)&&t.call(e,e[o],o,e)===!1)break;return e}function m(e){var t;if(arguments.length>1){if(t=h(arguments),K.assign)return K.assign.apply(K,t);t.shift(),v(t,function(t){v(t,function(t,a){e[a]=t})})}return e}function g(e,t){var a=h(arguments,2);return function(){return e.apply(t,a.concat(h(arguments)))}}function b(e,t){var a=e.style;v(t,function(e,t){Te.test(t)&&s(e)&&(e+="px"),a[t]=e})}function y(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function w(e,t){var a;return s(e.length)?v(e,function(e){w(e,t)}):e.classList?e.classList.add(t):(a=f(e.className),void(a?a.indexOf(t)<0&&(e.className=a+" "+t):e.className=t))}function T(e,t){return s(e.length)?v(e,function(e){T(e,t)}):e.classList?e.classList.remove(t):void(e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function x(e,t,a){return s(e.length)?v(e,function(e){x(e,t,a)}):void(a?w(e,t):T(e,t))}function C(e,t){return c(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-"+t)}function D(e,t,a){c(a)&&l(e[t])?e[t]=a:e.dataset?e.dataset[t]=a:e.setAttribute("data-"+t,a)}function k(e,t){c(e[t])?delete e[t]:e.dataset?delete e.dataset[t]:e.removeAttribute("data-"+t)}function P(e,t,a){var o=f(t).split(De);return o.length>1?v(o,function(t){P(e,t,a)}):void(e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a))}function _(e,t,a){var o=f(t).split(De);return o.length>1?v(o,function(t){_(e,t,a)}):void(e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent&&e.detachEvent("on"+t,a))}function B(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function O(e){var t,o=e||a.event;return o.target||(o.target=o.srcElement||G),s(o.pageX)||(t=G.documentElement,o.pageX=o.clientX+(a.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0),o.pageY=o.clientY+(a.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0)),o}function S(e){var t=G.documentElement,o=e.getBoundingClientRect();return{left:o.left+(a.scrollX||t&&t.scrollLeft||0)-(t&&t.clientLeft||0),top:o.top+(a.scrollY||t&&t.scrollTop||0)-(t&&t.clientTop||0)}}function M(e){var t=e.length,a=0,o=0;return t&&(v(e,function(e){a+=e.pageX,o+=e.pageY}),a/=t,o/=t),{pageX:a,pageY:o}}function N(e,t){return e.getElementsByTagName(t)}function L(e,t){return e.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t)}function R(e){return G.createElement(e)}function I(e,t){e.appendChild(t)}function E(e){e.parentNode&&e.parentNode.removeChild(e)}function j(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function W(e){var t=e.match(xe);return t&&(t[1]!==Z.protocol||t[2]!==Z.hostname||t[3]!==Z.port)}function X(e){var t="timestamp="+(new Date).getTime();return e+(e.indexOf("?")===-1?"?":"&")+t}function Y(e,t){var a;return e.naturalWidth?t(e.naturalWidth,e.naturalHeight):(a=R("img"),a.onload=function(){t(this.width,this.height)},void(a.src=e.src))}function z(e){var t=[],a=e.rotate,o=e.scaleX,i=e.scaleY;return s(a)&&t.push("rotate("+a+"deg)"),s(o)&&s(i)&&t.push("scale("+o+","+i+")"),t.length?t.join(" "):"none"}function H(e,t){var a,o,i=$e(e.degree)%180,n=(i>90?180-i:i)*Ke/180,r=Fe(n),s=qe(n),l=e.width,c=e.height,p=e.aspectRatio;return t?(a=l/(s+r/p),o=a/p):(a=l*s+c*r,o=l*r+c*s),{width:a,height:o}}function A(e,t){var a,o,i,n=R("canvas"),r=n.getContext("2d"),l=0,c=0,p=t.naturalWidth,u=t.naturalHeight,d=t.rotate,h=t.scaleX,f=t.scaleY,v=s(h)&&s(f)&&(1!==h||1!==f),m=s(d)&&0!==d,g=m||v,b=p,y=u;return v&&(a=p/2,o=u/2),m&&(i=H({width:p,height:u,degree:d}),b=i.width,y=i.height,a=i.width/2,o=i.height/2),n.width=b,n.height=y,g&&(l=-p/2,c=-u/2,r.save(),r.translate(a,o)),m&&r.rotate(d*Ke/180),v&&r.scale(h,f),r.drawImage(e,Je(l),Je(c),Je(p),Je(u)),g&&r.restore(),n}function U(e,t,a){var o="",i=t;for(a+=t;i<a;i++)o+=ot(e.getUint8(i));return o}function V(e){var t,a,o,i,n,r,s,l,c,p,u=new DataView(e),d=u.byteLength;if(255===u.getUint8(0)&&216===u.getUint8(1))for(c=2;c<d;){if(255===u.getUint8(c)&&225===u.getUint8(c+1)){s=c;break}c++}if(s&&(a=s+4,o=s+10,"Exif"===U(u,a,4)&&(r=u.getUint16(o),n=18761===r,(n||19789===r)&&42===u.getUint16(o+2,n)&&(i=u.getUint32(o+4,n),i>=8&&(l=o+i)))),l)for(d=u.getUint16(l,n),p=0;p<d;p++)if(c=l+12*p+2,274===u.getUint16(c,n)){c+=8,t=u.getUint16(c,n),u.setUint16(c,1,n);break}return t}function $(e){var t,a=e.replace(Pe,""),o=atob(a),i=o.length,n=new J(i),r=new Uint8Array(n);for(t=0;t<i;t++)r[t]=o.charCodeAt(t);return n}function F(e){var t,a=new Uint8Array(e),o=a.length,i="";for(t=0;t<o;t++)i+=ot(a[t]);return"data:image/jpeg;base64,"+btoa(i)}function q(e,t){var a=this;a.element=e,a.options=m({},q.DEFAULTS,p(t)&&t),a.ready=!1,a.built=!1,a.complete=!1,a.rotated=!1,a.cropped=!1,a.disabled=!1,a.replaced=!1,a.limited=!1,a.wheeling=!1,a.isImg=!1,a.originalUrl="",a.canvasData=null,a.cropBoxData=null,a.previews=null,a.init()}var G=a.document,Z=a.location,J=a.ArrayBuffer,K=a.Object,Q=a.Array,ee=a.String,te=a.Number,ae=a.Math,oe="cropper",ie=oe+"-modal",ne=oe+"-hide",re=oe+"-hidden",se=oe+"-invisible",le=oe+"-move",ce=oe+"-crop",pe=oe+"-disabled",ue=oe+"-bg",de="mousedown touchstart pointerdown MSPointerDown",he="mousemove touchmove pointermove MSPointerMove",fe="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",ve="wheel mousewheel DOMMouseScroll",me="dblclick",ge="resize",be="error",ye="load",we=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,Te=/width|height|left|top|marginLeft|marginTop/,xe=/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i,Ce=/^\s+(.*)\s+$/,De=/\s+/,ke=/^data\:/,Pe=/^data\:([^\;]+)\;base64,/,_e=/^data\:image\/jpeg.*;base64,/,Be="preview",Oe="action",Se="e",Me="w",Ne="s",Le="n",Re="se",Ie="sw",Ee="ne",je="nw",We="all",Xe="crop",Ye="move",ze="zoom",He="none",Ae=!!G.createElement("canvas").getContext,Ue=ae.min,Ve=ae.max,$e=ae.abs,Fe=ae.sin,qe=ae.cos,Ge=ae.sqrt,Ze=ae.round,Je=ae.floor,Ke=ae.PI,Qe=K.prototype,et=Qe.toString,tt=Qe.hasOwnProperty,at=Q.prototype.slice,ot=ee.fromCharCode;q.prototype={constructor:q,init:function(){var e,t=this,a=t.element,o=a.tagName.toLowerCase();if(!C(a,oe)){if(D(a,oe,t),"img"===o){if(t.isImg=!0,t.originalUrl=e=a.getAttribute("src"),!e)return;e=a.src}else"canvas"===o&&Ae&&(e=a.toDataURL());t.load(e)}},load:function(e){var t,a=this,o=a.options;if(e&&(!u(o.build)||o.build.call(a.element)!==!1)){if(a.url=e,a.imageData={},!o.checkOrientation||!J)return a.clone();if(ke.test(e))return _e.test(e)?a.read($(e)):a.clone();t=new XMLHttpRequest,t.onerror=t.onabort=function(){a.clone()},t.onload=function(){a.read(this.response)},t.open("get",e),t.responseType="arraybuffer",t.send()}},read:function(e){var t,a,o,i=this,n=i.options,r=V(e),s=i.imageData;if(r>1)switch(i.url=F(e),r){case 2:a=-1;break;case 3:t=-180;break;case 4:o=-1;break;case 5:t=90,o=-1;break;case 6:t=90;break;case 7:t=90,a=-1;break;case 8:t=-90}n.rotatable&&(s.rotate=t),n.scalable&&(s.scaleX=a,s.scaleY=o),i.clone()},clone:function(){var e,t,a,o,i,n=this,r=n.element,s=n.url;n.options.checkCrossOrigin&&W(s)&&(e=r.crossOrigin,e?t=s:(e="anonymous",t=X(s))),n.crossOrigin=e,n.crossOriginUrl=t,a=R("img"),e&&(a.crossOrigin=e),a.src=t||s,n.image=a,n._start=o=g(n.start,n),n._stop=i=g(n.stop,n),n.isImg?r.complete?n.start():P(r,ye,o):(P(a,ye,o),P(a,be,i),w(a,ne),r.parentNode.insertBefore(a,r.nextSibling))},start:function(e){var t=this,a=t.isImg?t.element:t.image;e&&(_(a,ye,t._start),_(a,be,t._stop)),Y(a,function(e,a){m(t.imageData,{naturalWidth:e,naturalHeight:a,aspectRatio:e/a}),t.ready=!0,t.build()})},stop:function(){var e=this,t=e.image;_(t,ye,e._start),_(t,be,e._stop),E(t),e.image=null},build:function(){var e,t,a,o,i,n,r,s=this,l=s.options,c=s.element,p=s.image;s.ready&&(s.built&&s.unbuild(),t=R("div"),t.innerHTML=q.TEMPLATE,s.container=e=c.parentNode,s.cropper=a=L(t,"cropper-container")[0],s.canvas=o=L(a,"cropper-canvas")[0],s.dragBox=i=L(a,"cropper-drag-box")[0],s.cropBox=n=L(a,"cropper-crop-box")[0],s.viewBox=L(a,"cropper-view-box")[0],s.face=r=L(n,"cropper-face")[0],I(o,p),w(c,re),e.insertBefore(a,c.nextSibling),s.isImg||T(p,ne),s.initPreview(),s.bind(),l.aspectRatio=Ve(0,l.aspectRatio)||NaN,l.viewMode=Ve(0,Ue(3,Ze(l.viewMode)))||0,l.autoCrop?(s.cropped=!0,l.modal&&w(i,ie)):w(n,re),l.guides||w(L(n,"cropper-dashed"),re),l.center||w(L(n,"cropper-center"),re),l.background&&w(a,ue),l.highlight||w(r,se),l.cropBoxMovable&&(w(r,le),D(r,Oe,We)),l.cropBoxResizable||(w(L(n,"cropper-line"),re),w(L(n,"cropper-point"),re)),s.setDragMode(l.dragMode),s.render(),s.built=!0,s.setData(l.data),setTimeout(function(){u(l.built)&&l.built.call(c),u(l.crop)&&l.crop.call(c,s.getData()),s.complete=!0},0))},unbuild:function(){var e=this;e.built&&(e.built=!1,e.complete=!1,e.initialImageData=null,e.initialCanvasData=null,e.initialCropBoxData=null,e.containerData=null,e.canvasData=null,e.cropBoxData=null,e.unbind(),e.resetPreview(),e.previews=null,e.viewBox=null,e.cropBox=null,e.dragBox=null,e.canvas=null,e.container=null,E(e.cropper),e.cropper=null)},render:function(){var e=this;e.initContainer(),e.initCanvas(),e.initCropBox(),e.renderCanvas(),e.cropped&&e.renderCropBox()},initContainer:function(){var e,t=this,a=t.options,o=t.element,i=t.container,n=t.cropper;w(n,re),T(o,re),t.containerData=e={width:Ve(i.offsetWidth,te(a.minContainerWidth)||200),height:Ve(i.offsetHeight,te(a.minContainerHeight)||100)},b(n,{width:e.width,height:e.height}),w(o,re),T(n,re)},initCanvas:function(){var e,t=this,a=t.options.viewMode,o=t.containerData,i=t.imageData,n=90===$e(i.rotate),r=n?i.naturalHeight:i.naturalWidth,s=n?i.naturalWidth:i.naturalHeight,l=r/s,c=o.width,p=o.height;o.height*l>o.width?3===a?c=o.height*l:p=o.width/l:3===a?p=o.width/l:c=o.height*l,e={naturalWidth:r,naturalHeight:s,aspectRatio:l,width:c,height:p},e.oldLeft=e.left=(o.width-c)/2,e.oldTop=e.top=(o.height-p)/2,t.canvasData=e,t.limited=1===a||2===a,t.limitCanvas(!0,!0),t.initialImageData=m({},i),t.initialCanvasData=m({},e)},limitCanvas:function(e,t){var a,o,i,n,r=this,s=r.options,l=s.viewMode,c=r.containerData,p=r.canvasData,u=p.aspectRatio,d=r.cropBoxData,h=r.cropped&&d;e&&(a=te(s.minCanvasWidth)||0,o=te(s.minCanvasHeight)||0,l>1?(a=Ve(a,c.width),o=Ve(o,c.height),3===l&&(o*u>a?a=o*u:o=a/u)):l>0&&(a?a=Ve(a,h?d.width:0):o?o=Ve(o,h?d.height:0):h&&(a=d.width,o=d.height,o*u>a?a=o*u:o=a/u)),a&&o?o*u>a?o=a/u:a=o*u:a?o=a/u:o&&(a=o*u),p.minWidth=a,p.minHeight=o,p.maxWidth=1/0,p.maxHeight=1/0),t&&(l?(i=c.width-p.width,n=c.height-p.height,p.minLeft=Ue(0,i),p.minTop=Ue(0,n),p.maxLeft=Ve(0,i),p.maxTop=Ve(0,n),h&&r.limited&&(p.minLeft=Ue(d.left,d.left+d.width-p.width),p.minTop=Ue(d.top,d.top+d.height-p.height),p.maxLeft=d.left,p.maxTop=d.top,2===l&&(p.width>=c.width&&(p.minLeft=Ue(0,i),p.maxLeft=Ve(0,i)),p.height>=c.height&&(p.minTop=Ue(0,n),p.maxTop=Ve(0,n))))):(p.minLeft=-p.width,p.minTop=-p.height,p.maxLeft=c.width,p.maxTop=c.height))},renderCanvas:function(e){var t,a,o=this,i=o.canvasData,n=o.imageData,r=n.rotate;o.rotated&&(o.rotated=!1,a=H({width:n.width,height:n.height,degree:r}),t=a.width/a.height,t!==i.aspectRatio&&(i.left-=(a.width-i.width)/2,i.top-=(a.height-i.height)/2,i.width=a.width,i.height=a.height,i.aspectRatio=t,i.naturalWidth=n.naturalWidth,i.naturalHeight=n.naturalHeight,r%180&&(a=H({width:n.naturalWidth,height:n.naturalHeight,degree:r}),i.naturalWidth=a.width,i.naturalHeight=a.height),o.limitCanvas(!0,!1))),(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Ue(Ve(i.width,i.minWidth),i.maxWidth),i.height=Ue(Ve(i.height,i.minHeight),i.maxHeight),o.limitCanvas(!1,!0),i.oldLeft=i.left=Ue(Ve(i.left,i.minLeft),i.maxLeft),i.oldTop=i.top=Ue(Ve(i.top,i.minTop),i.maxTop),b(o.canvas,{width:i.width,height:i.height,left:i.left,top:i.top}),o.renderImage(),o.cropped&&o.limited&&o.limitCropBox(!0,!0),e&&o.output()},renderImage:function(e){var t,a,o,i,n,r=this,s=r.canvasData,l=r.imageData;l.rotate&&(a=H({width:s.width,height:s.height,degree:l.rotate,aspectRatio:l.aspectRatio},!0),o=a.width,i=a.height,t={width:o,height:i,left:(s.width-o)/2,top:(s.height-i)/2}),m(l,t||{width:s.width,height:s.height,left:0,top:0}),n=z(l),b(r.image,{width:l.width,height:l.height,marginLeft:l.left,marginTop:l.top,WebkitTransform:n,msTransform:n,transform:n}),e&&r.output()},initCropBox:function(){var e=this,t=e.options,a=t.aspectRatio,o=te(t.autoCropArea)||.8,i=e.canvasData,n={width:i.width,height:i.height};a&&(i.height*a>i.width?n.height=n.width/a:n.width=n.height*a),e.cropBoxData=n,e.limitCropBox(!0,!0),n.width=Ue(Ve(n.width,n.minWidth),n.maxWidth),n.height=Ue(Ve(n.height,n.minHeight),n.maxHeight),n.width=Ve(n.minWidth,n.width*o),n.height=Ve(n.minHeight,n.height*o),n.oldLeft=n.left=i.left+(i.width-n.width)/2,n.oldTop=n.top=i.top+(i.height-n.height)/2,e.initialCropBoxData=m({},n)},limitCropBox:function(e,t){var a,o,i,n,r=this,s=r.options,l=s.aspectRatio,c=r.containerData,p=r.canvasData,u=r.cropBoxData,d=r.limited;e&&(a=te(s.minCropBoxWidth)||0,o=te(s.minCropBoxHeight)||0,a=Ue(a,c.width),o=Ue(o,c.height),i=Ue(c.width,d?p.width:c.width),n=Ue(c.height,d?p.height:c.height),l&&(a&&o?o*l>a?o=a/l:a=o*l:a?o=a/l:o&&(a=o*l),n*l>i?n=i/l:i=n*l),u.minWidth=Ue(a,i),u.minHeight=Ue(o,n),u.maxWidth=i,u.maxHeight=n),t&&(d?(u.minLeft=Ve(0,p.left),u.minTop=Ve(0,p.top),u.maxLeft=Ue(c.width,p.left+p.width)-u.width,u.maxTop=Ue(c.height,p.top+p.height)-u.height):(u.minLeft=0,u.minTop=0,u.maxLeft=c.width-u.width,u.maxTop=c.height-u.height))},renderCropBox:function(){var e=this,t=e.options,a=e.containerData,o=e.cropBoxData;(o.width>o.maxWidth||o.width<o.minWidth)&&(o.left=o.oldLeft),(o.height>o.maxHeight||o.height<o.minHeight)&&(o.top=o.oldTop),o.width=Ue(Ve(o.width,o.minWidth),o.maxWidth),o.height=Ue(Ve(o.height,o.minHeight),o.maxHeight),e.limitCropBox(!1,!0),o.oldLeft=o.left=Ue(Ve(o.left,o.minLeft),o.maxLeft),o.oldTop=o.top=Ue(Ve(o.top,o.minTop),o.maxTop),t.movable&&t.cropBoxMovable&&D(e.face,Oe,o.width===a.width&&o.height===a.height?Ye:We),b(e.cropBox,{width:o.width,height:o.height,left:o.left,top:o.top}),e.cropped&&e.limited&&e.limitCanvas(!0,!0),e.disabled||e.output()},output:function(){var e=this,t=e.options;e.preview(),e.complete&&u(t.crop)&&t.crop.call(e.element,e.getData())},initPreview:function(){var e,t=this,a=t.options.preview,o=R("img"),i=t.crossOrigin,n=i?t.crossOriginUrl:t.url;i&&(o.crossOrigin=i),o.src=n,I(t.viewBox,o),a&&(t.previews=e=G.querySelectorAll(a),v(e,function(e){var t=R("img");D(e,Be,{width:e.offsetWidth,height:e.offsetHeight,html:e.innerHTML}),i&&(t.crossOrigin=i),t.src=n,t.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',j(e),I(e,t)}))},resetPreview:function(){v(this.previews,function(e){var t=C(e,Be);b(e,{width:t.width,height:t.height}),e.innerHTML=t.html,k(e,Be)})},preview:function(){var e=this,t=e.imageData,a=e.canvasData,o=e.cropBoxData,i=o.width,n=o.height,r=t.width,s=t.height,l=o.left-a.left-t.left,c=o.top-a.top-t.top,p=z(t),u={WebkitTransform:p,msTransform:p,transform:p};e.cropped&&!e.disabled&&(b(N(e.viewBox,"img")[0],m({width:r,height:s,marginLeft:-l,marginTop:-c},u)),v(e.previews,function(e){var t=C(e,Be),a=t.width,o=t.height,p=a,d=o,h=1;i&&(h=a/i,d=n*h),n&&d>o&&(h=o/n,p=i*h,d=o),b(e,{width:p,height:d}),b(N(e,"img")[0],m({width:r*h,height:s*h,marginLeft:-l*h,marginTop:-c*h},u))}))},bind:function(){var e=this,t=e.options,o=e.cropper;P(o,de,e._cropStart=g(e.cropStart,e)),t.zoomable&&t.zoomOnWheel&&P(o,ve,e._wheel=g(e.wheel,e)),t.toggleDragModeOnDblclick&&P(o,me,e._dblclick=g(e.dblclick,e)),P(G,he,e._cropMove=g(e.cropMove,e)),P(G,fe,e._cropEnd=g(e.cropEnd,e)),t.responsive&&P(a,ge,e._resize=g(e.resize,e))},unbind:function(){var e=this,t=e.options,o=e.cropper;_(o,de,e._cropStart),t.zoomable&&t.zoomOnWheel&&_(o,ve,e._wheel),t.toggleDragModeOnDblclick&&_(o,me,e._dblclick),_(G,he,e._cropMove),_(G,fe,e._cropEnd),t.responsive&&_(a,ge,e._resize)},resize:function(){var e,t,a,o=this,i=o.options.restore,n=o.container,r=o.containerData;!o.disabled&&r&&(a=n.offsetWidth/r.width,1===a&&n.offsetHeight===r.height||(i&&(e=o.getCanvasData(),t=o.getCropBoxData()),o.render(),i&&(o.setCanvasData(v(e,function(t,o){e[o]=t*a})),o.setCropBoxData(v(t,function(e,o){t[o]=e*a})))))},dblclick:function(){var e=this;e.disabled||e.setDragMode(y(e.dragBox,ce)?Ye:Xe)},wheel:function(e){var t=this,a=O(e),o=te(t.options.wheelZoomRatio)||.1,i=1;t.disabled||(B(a),t.wheeling||(t.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),a.deltaY?i=a.deltaY>0?1:-1:a.wheelDelta?i=-a.wheelDelta/120:a.detail&&(i=a.detail>0?1:-1),t.zoom(-i*o,a)))},cropStart:function(e){var t,a,o,i=this,n=i.options,r=O(e),s=r.touches;if(!i.disabled){if(s){if(t=s.length,t>1){if(!n.zoomable||!n.zoomOnTouch||2!==t)return;a=s[1],i.startX2=a.pageX,i.startY2=a.pageY,o=ze}a=s[0]}if(o=o||C(r.target,Oe),we.test(o)){if(u(n.cropstart)&&n.cropstart.call(i.element,{originalEvent:r,action:o})===!1)return;B(r),i.action=o,i.cropping=!1,i.startX=a?a.pageX:r.pageX,i.startY=a?a.pageY:r.pageY,o===Xe&&(i.cropping=!0,w(i.dragBox,ie))}}},cropMove:function(e){var t,a,o=this,i=o.options,n=O(e),r=n.touches,s=o.action;if(!o.disabled){if(r){if(t=r.length,t>1){if(!i.zoomable||!i.zoomOnTouch||2!==t)return;a=r[1],o.endX2=a.pageX,o.endY2=a.pageY}a=r[0]}if(s){if(u(i.cropmove)&&i.cropmove.call(o.element,{originalEvent:n,action:s})===!1)return;B(n),o.endX=a?a.pageX:n.pageX,o.endY=a?a.pageY:n.pageY,o.change(n.shiftKey,s===ze?n:null)}}},cropEnd:function(e){var t=this,a=t.options,o=O(e),i=t.action;t.disabled||i&&(B(o),t.cropping&&(t.cropping=!1,x(t.dragBox,ie,t.cropped&&a.modal)),t.action="",u(a.cropend)&&a.cropend.call(t.element,{originalEvent:o,action:i}))},change:function(e,t){var a,o,i=this,n=i.options,r=n.aspectRatio,s=i.action,l=i.containerData,c=i.canvasData,p=i.cropBoxData,u=p.width,d=p.height,h=p.left,f=p.top,v=h+u,m=f+d,g=0,b=0,y=l.width,w=l.height,x=!0;switch(!r&&e&&(r=u&&d?u/d:1),i.limited&&(g=p.minLeft,b=p.minTop,y=g+Ue(l.width,c.width),w=b+Ue(l.height,c.height)),o={x:i.endX-i.startX,y:i.endY-i.startY},r&&(o.X=o.y*r,o.Y=o.x/r),s){case We:h+=o.x,f+=o.y;break;case Se:if(o.x>=0&&(v>=y||r&&(f<=b||m>=w))){x=!1;break}u+=o.x,r&&(d=u/r,f-=o.Y/2),u<0&&(s=Me,u=0);break;case Le:if(o.y<=0&&(f<=b||r&&(h<=g||v>=y))){x=!1;break}d-=o.y,f+=o.y,r&&(u=d*r,h+=o.X/2),d<0&&(s=Ne,d=0);break;case Me:if(o.x<=0&&(h<=g||r&&(f<=b||m>=w))){x=!1;break}u-=o.x,h+=o.x,r&&(d=u/r,f+=o.Y/2),u<0&&(s=Se,u=0);break;case Ne:if(o.y>=0&&(m>=w||r&&(h<=g||v>=y))){x=!1;break}d+=o.y,r&&(u=d*r,h-=o.X/2),d<0&&(s=Le,d=0);break;case Ee:if(r){if(o.y<=0&&(f<=b||v>=y)){x=!1;break}d-=o.y,f+=o.y,u=d*r}else o.x>=0?v<y?u+=o.x:o.y<=0&&f<=b&&(x=!1):u+=o.x,o.y<=0?f>b&&(d-=o.y,f+=o.y):(d-=o.y,f+=o.y);u<0&&d<0?(s=Ie,d=0,u=0):u<0?(s=je,u=0):d<0&&(s=Re,d=0);break;case je:if(r){if(o.y<=0&&(f<=b||h<=g)){x=!1;break}d-=o.y,f+=o.y,u=d*r,h+=o.X}else o.x<=0?h>g?(u-=o.x,h+=o.x):o.y<=0&&f<=b&&(x=!1):(u-=o.x,h+=o.x),o.y<=0?f>b&&(d-=o.y,f+=o.y):(d-=o.y,f+=o.y);u<0&&d<0?(s=Re,d=0,u=0):u<0?(s=Ee,u=0):d<0&&(s=Ie,d=0);break;case Ie:if(r){if(o.x<=0&&(h<=g||m>=w)){x=!1;break}u-=o.x,h+=o.x,d=u/r}else o.x<=0?h>g?(u-=o.x,h+=o.x):o.y>=0&&m>=w&&(x=!1):(u-=o.x,h+=o.x),o.y>=0?m<w&&(d+=o.y):d+=o.y;u<0&&d<0?(s=Ee,d=0,u=0):u<0?(s=Re,u=0):d<0&&(s=je,d=0);break;case Re:if(r){if(o.x>=0&&(v>=y||m>=w)){x=!1;break}u+=o.x,d=u/r}else o.x>=0?v<y?u+=o.x:o.y>=0&&m>=w&&(x=!1):u+=o.x,o.y>=0?m<w&&(d+=o.y):d+=o.y;u<0&&d<0?(s=je,d=0,u=0):u<0?(s=Ie,u=0):d<0&&(s=Ee,d=0);break;case Ye:i.move(o.x,o.y),x=!1;break;case ze:i.zoom(function(e,t,a,o){var i=Ge(e*e+t*t),n=Ge(a*a+o*o);return(n-i)/i}($e(i.startX-i.startX2),$e(i.startY-i.startY2),$e(i.endX-i.endX2),$e(i.endY-i.endY2)),t),i.startX2=i.endX2,i.startY2=i.endY2,x=!1;break;case Xe:if(!o.x||!o.y){x=!1;break}a=S(i.cropper),h=i.startX-a.left,f=i.startY-a.top,u=p.minWidth,d=p.minHeight,o.x>0?s=o.y>0?Re:Ee:o.x<0&&(h-=u,s=o.y>0?Ie:je),o.y<0&&(f-=d),i.cropped||(T(i.cropBox,re),i.cropped=!0,i.limited&&i.limitCropBox(!0,!0))}x&&(p.width=u,p.height=d,p.left=h,p.top=f,i.action=s,i.renderCropBox()),i.startX=i.endX,i.startY=i.endY},crop:function(){var e=this;return e.built&&!e.disabled&&(e.cropped||(e.cropped=!0,e.limitCropBox(!0,!0),e.options.modal&&w(e.dragBox,ie),T(e.cropBox,re)),e.setCropBoxData(e.initialCropBoxData)),e},reset:function(){var e=this;return e.built&&!e.disabled&&(e.imageData=m({},e.initialImageData),e.canvasData=m({},e.initialCanvasData),e.cropBoxData=m({},e.initialCropBoxData),e.renderCanvas(),e.cropped&&e.renderCropBox()),e},clear:function(){var e=this;return e.cropped&&!e.disabled&&(m(e.cropBoxData,{left:0,top:0,width:0,height:0}),e.cropped=!1,e.renderCropBox(),e.limitCanvas(),e.renderCanvas(),T(e.dragBox,ie),w(e.cropBox,re)),e},replace:function(e){var t=this;return!t.disabled&&e&&(t.isImg&&(t.replaced=!0,t.element.src=e),t.options.data=null,t.load(e)),t},enable:function(){var e=this;return e.built&&(e.disabled=!1,T(e.cropper,pe)),e},disable:function(){var e=this;return e.built&&(e.disabled=!0,w(e.cropper,pe)),e},destroy:function(){var e=this,t=e.element,a=e.image;return e.ready?(e.isImg&&e.replaced&&(t.src=e.originalUrl),e.unbuild(),T(t,re)):e.isImg?_(t,ye,e.start):a&&E(a),k(t,oe),e},move:function(e,t){var a=this,o=a.canvasData;return a.moveTo(l(e)?e:o.left+te(e),l(t)?t:o.top+te(t))},moveTo:function(e,t){var a=this,o=a.canvasData,i=!1;return l(t)&&(t=e),e=te(e),t=te(t),a.built&&!a.disabled&&a.options.movable&&(s(e)&&(o.left=e,i=!0),s(t)&&(o.top=t,i=!0),i&&a.renderCanvas(!0)),a},zoom:function(e,t){var a=this,o=a.canvasData;return e=te(e),e=e<0?1/(1-e):1+e,a.zoomTo(o.width*e/o.naturalWidth,t)},zoomTo:function(e,t){var a,o,i,n,r=this,s=r.options,l=r.canvasData,c=l.width,p=l.height,d=l.naturalWidth,h=l.naturalHeight;if(e=te(e),e>=0&&r.built&&!r.disabled&&s.zoomable){if(a=d*e,o=h*e,u(s.zoom)&&s.zoom.call(r.element,{originalEvent:t,oldRatio:c/d,ratio:a/d})===!1)return r;t?(i=S(r.cropper),n=t.touches?M(t.touches):{pageX:t.pageX,pageY:t.pageY},l.left-=(a-c)*((n.pageX-i.left-l.left)/c),l.top-=(o-p)*((n.pageY-i.top-l.top)/p)):(l.left-=(a-c)/2,l.top-=(o-p)/2),l.width=a,l.height=o,r.renderCanvas(!0)}return r},rotate:function(e){var t=this;return t.rotateTo((t.imageData.rotate||0)+te(e))},rotateTo:function(e){var t=this;return e=te(e),s(e)&&t.built&&!t.disabled&&t.options.rotatable&&(t.imageData.rotate=e%360,t.rotated=!0,t.renderCanvas(!0)),t},scale:function(e,t){var a=this,o=a.imageData,i=!1;return l(t)&&(t=e),e=te(e),t=te(t),a.built&&!a.disabled&&a.options.scalable&&(s(e)&&(o.scaleX=e,i=!0),s(t)&&(o.scaleY=t,i=!0),i&&a.renderImage(!0)),a},scaleX:function(e){var t=this,a=t.imageData.scaleY;return t.scale(e,s(a)?a:1)},scaleY:function(e){var t=this,a=t.imageData.scaleX;return t.scale(s(a)?a:1,e)},getData:function(e){var t,a,o=this,i=o.options,n=o.imageData,r=o.canvasData,s=o.cropBoxData;return o.built&&o.cropped?(a={x:s.left-r.left,y:s.top-r.top,width:s.width,height:s.height},t=n.width/n.naturalWidth,v(a,function(o,i){o/=t,a[i]=e?Ze(o):o})):a={x:0,y:0,width:0,height:0},i.rotatable&&(a.rotate=n.rotate||0),i.scalable&&(a.scaleX=n.scaleX||1,a.scaleY=n.scaleY||1),a},setData:function(e){var t,a,o,i=this,n=i.options,r=i.imageData,l=i.canvasData,c={};return u(e)&&(e=e.call(i.element)),i.built&&!i.disabled&&p(e)&&(n.rotatable&&s(e.rotate)&&e.rotate!==r.rotate&&(r.rotate=e.rotate,i.rotated=t=!0),n.scalable&&(s(e.scaleX)&&e.scaleX!==r.scaleX&&(r.scaleX=e.scaleX,a=!0),s(e.scaleY)&&e.scaleY!==r.scaleY&&(r.scaleY=e.scaleY,a=!0)),t?i.renderCanvas():a&&i.renderImage(),o=r.width/r.naturalWidth,s(e.x)&&(c.left=e.x*o+l.left),s(e.y)&&(c.top=e.y*o+l.top),s(e.width)&&(c.width=e.width*o),s(e.height)&&(c.height=e.height*o),i.setCropBoxData(c)),i},getContainerData:function(){var e=this;return e.built?e.containerData:{}},getImageData:function(){var e=this;return e.ready?e.imageData:{}},getCanvasData:function(){var e=this,t=e.canvasData,a={};return e.built&&v(["left","top","width","height","naturalWidth","naturalHeight"],function(e){a[e]=t[e]}),a},setCanvasData:function(e){var t=this,a=t.canvasData,o=a.aspectRatio;return u(e)&&(e=e.call(t.element)),t.built&&!t.disabled&&p(e)&&(s(e.left)&&(a.left=e.left),s(e.top)&&(a.top=e.top),s(e.width)?(a.width=e.width,a.height=e.width/o):s(e.height)&&(a.height=e.height,a.width=e.height*o),t.renderCanvas(!0)),t},getCropBoxData:function(){var e,t=this,a=t.cropBoxData;return t.built&&t.cropped&&(e={left:a.left,top:a.top,width:a.width,height:a.height}),e||{}},setCropBoxData:function(e){var t,a,o=this,i=o.cropBoxData,n=o.options.aspectRatio;return u(e)&&(e=e.call(o.element)),o.built&&o.cropped&&!o.disabled&&p(e)&&(s(e.left)&&(i.left=e.left),s(e.top)&&(i.top=e.top),s(e.width)&&(t=!0,i.width=e.width),s(e.height)&&(a=!0,i.height=e.height),n&&(t?i.height=i.width/n:a&&(i.width=i.height*n)),o.renderCropBox()),o},getCroppedCanvas:function(e){var t,a,o,i,n,r,s,l,c,u,d,h=this;if(h.built&&h.cropped&&Ae)return p(e)||(e={}),d=h.getData(),t=d.width,a=d.height,l=t/a,p(e)&&(n=e.width,r=e.height,n?(r=n/l,s=n/t):r&&(n=r*l,s=r/a)),o=Je(n||t),i=Je(r||a),c=R("canvas"),c.width=o,c.height=i,u=c.getContext("2d"),e.fillColor&&(u.fillStyle=e.fillColor,u.fillRect(0,0,o,i)),u.drawImage.apply(u,function(){var e,o,i,n,r,l,c=A(h.image,h.imageData),p=c.width,u=c.height,f=[c],v=d.x,m=d.y;return v<=-t||v>p?v=e=i=r=0:v<=0?(i=-v,v=0,e=r=Ue(p,t+v)):v<=p&&(i=0,e=r=Ue(t,p-v)),e<=0||m<=-a||m>u?m=o=n=l=0:m<=0?(n=-m,m=0,o=l=Ue(u,a+m)):m<=u&&(n=0,o=l=Ue(a,u-m)),f.push(Je(v),Je(m),Je(e),Je(o)),s&&(i*=s,n*=s,r*=s,l*=s),r>0&&l>0&&f.push(Je(i),Je(n),Je(r),Je(l)),f}.call(h)),c},setAspectRatio:function(e){var t=this,a=t.options;return t.disabled||l(e)||(a.aspectRatio=Ve(0,e)||NaN,t.built&&(t.initCropBox(),t.cropped&&t.renderCropBox())),t},setDragMode:function(e){var t,a,o=this,i=o.options,n=o.dragBox,r=o.face;return o.ready&&!o.disabled&&(t=e===Xe,a=i.movable&&e===Ye,e=t||a?e:He,D(n,Oe,e),x(n,ce,t),x(n,le,a),i.cropBoxMovable||(D(r,Oe,e),x(r,ce,t),x(r,le,a))),o}},q.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},q.TEMPLATE=function(e,t){return t=t.split(","),e.replace(/\d+/g,function(e){return t[e]})}('<0 6="5-container"><0 6="5-wrap-9"><0 6="5-canvas"></0></0><0 6="5-drag-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,action,data,point,cropper,class,line,dashed,box");var it=a.Cropper;return q.noConflict=function(){return a.Cropper=it,q},q.setDefaults=function(e){m(q.DEFAULTS,e)},o=[],i=function(){return q}.apply(t,o),!(void 0!==i&&(e.exports=i)),n||(a.Cropper=q),q})},949:function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),p=a(1),u=o(p),d=a(945),h=o(d),f=a(19),v=o(f),m=["dragMode","aspectRatio","data","viewMode","preview","responsive","restore","checkCrossOrigin","checkOrientation","modal","guides","center","highlight","background","autoCrop","autoCropArea","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","wheelZoomRation","cropBoxMovable","cropBoxResizable","toggleDragModeOnDblclick","minContainerWidth","minContainerHeight","minCanvasWidth","minCanvasHeight","minCropBoxWidth","minCropBoxHeight","build","built","cropstart","cropmove","cropend","crop","zoom"],g=m.slice(3),b=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this,t=Object.keys(this.props).filter(function(e){return m.indexOf(e)!==-1}).reduce(function(t,a){return Object.assign({},t,i({},a,e.props[a]))},{});this.img=v["default"].findDOMNode(this.refs.img),this.cropper=new h["default"](this.img,t)}},{key:"componentWillReceiveProps",value:function(e){e.src!==this.props.src&&this.cropper.reset().clear().replace(e.src),e.aspectRatio!==this.props.aspectRatio&&this.setAspectRatio(e.aspectRatio),e.data!==this.props.data&&this.setData(e.data),e.dragMode!==this.props.dragMode&&this.setDragMode(e.dragMode),e.cropBoxData!==this.props.cropBoxData&&this.setCropBoxData(e.cropBoxData),e.canvasData!==this.props.canvasData&&this.setCanvasData(e.canvasData),e.moveTo!==this.props.moveTo&&(e.moveTo.length>1?this.moveTo(e.moveTo[0],e.moveTo[1]):this.moveTo(e.moveTo[0])),e.zoomTo!==this.props.zoomTo&&this.zoomTo(e.zoomTo),e.rotateTo!==this.props.rotateTo&&this.rotateTo(e.rotateTo),e.scaleX!==this.props.scaleX&&this.scaleX(e.scaleX),e.scaleY!==this.props.scaleY&&this.scaleY(e.scaleY),e.enable!==this.props.enable&&(e.enable?this.enable():this.disable());for(var t in e)if(e[t]!==this.props[t]&&g.indexOf(t)!==-1)throw new Error("prop: "+t+" can't be change after componentDidMount")}},{key:"componentWillUnmount",value:function(){this.img&&(this.cropper.destroy(),delete this.img,delete this.cropper)}},{key:"setDragMode",value:function(e){return this.cropper.setDragMode(e)}},{key:"setAspectRatio",value:function(e){return this.cropper.setAspectRatio(e)}},{key:"getCroppedCanvas",value:function(e){return this.cropper.getCroppedCanvas(e)}},{key:"setCropBoxData",value:function(e){return this.cropper.setCropBoxData(e)}},{key:"getCropBoxData",value:function(){return this.cropper.getCropBoxData()}},{key:"setCanvasData",value:function(e){return this.cropper.setCanvasData(e);
}},{key:"getCanvasData",value:function(){return this.cropper.getCanvasData()}},{key:"getImageData",value:function(){return this.cropper.getImageData()}},{key:"getContainerData",value:function(){return this.cropper.getContainerData()}},{key:"setData",value:function(e){return this.cropper.setData(e)}},{key:"getData",value:function(e){return this.cropper.getData(e)}},{key:"crop",value:function(){return this.cropper.crop()}},{key:"move",value:function(e,t){return this.cropper.move(e,t)}},{key:"moveTo",value:function(e,t){return this.cropper.moveTo(e,t)}},{key:"zoom",value:function(e){return this.cropper.zoom(e)}},{key:"zoomTo",value:function(e){return this.cropper.zoomTo(e)}},{key:"rotate",value:function(e){return this.cropper.rotate(e)}},{key:"rotateTo",value:function(e){return this.cropper.rotateTo(e)}},{key:"enable",value:function(){return this.cropper.enable()}},{key:"disable",value:function(){return this.cropper.disable()}},{key:"reset",value:function(){return this.cropper.reset()}},{key:"clear",value:function(){return this.cropper.clear()}},{key:"replace",value:function(e,t){return this.cropper.replace(e,t)}},{key:"scale",value:function(e,t){return this.cropper.scale(e,t)}},{key:"scaleX",value:function(e){return this.cropper.scaleX(e)}},{key:"scaleY",value:function(e){return this.cropper.scaleY(e)}},{key:"render",value:function(){var e=this.props,t=e.src,a=e.alt,o=e.crossOrigin;return u["default"].createElement("div",l({},this.props,{src:null,crossOrigin:null,alt:null}),u["default"].createElement("img",{crossOrigin:o,ref:"img",src:t,alt:void 0===a?"picture":a,style:{opacity:0}}))}}]),t}(p.Component);b.propTypes={crossOrigin:p.PropTypes.string,src:p.PropTypes.string,alt:p.PropTypes.string,aspectRatio:p.PropTypes.number,dragMode:p.PropTypes.oneOf(["crop","move","none"]),data:p.PropTypes.shape({x:p.PropTypes.number,y:p.PropTypes.number,width:p.PropTypes.number,height:p.PropTypes.number,rotate:p.PropTypes.number,scaleX:p.PropTypes.number,scaleY:p.PropTypes.number}),scaleX:p.PropTypes.number,scaleY:p.PropTypes.number,enable:p.PropTypes.bool,cropBoxData:p.PropTypes.shape({left:p.PropTypes.number,top:p.PropTypes.number,width:p.PropTypes.number,hegiht:p.PropTypes.number}),canvasData:p.PropTypes.shape({left:p.PropTypes.number,top:p.PropTypes.number,width:p.PropTypes.number,hegiht:p.PropTypes.number}),zoomTo:p.PropTypes.number,moveTo:p.PropTypes.arrayOf(p.PropTypes.number),rotateTo:p.PropTypes.number,viewMode:p.PropTypes.oneOf([0,1,2,3]),preview:p.PropTypes.string,responsive:p.PropTypes.bool,restore:p.PropTypes.bool,checkCrossOrigin:p.PropTypes.bool,checkOrientation:p.PropTypes.bool,modal:p.PropTypes.bool,guides:p.PropTypes.bool,center:p.PropTypes.bool,highlight:p.PropTypes.bool,background:p.PropTypes.bool,autoCrop:p.PropTypes.bool,autoCropArea:p.PropTypes.number,movable:p.PropTypes.bool,rotatable:p.PropTypes.bool,scalable:p.PropTypes.bool,zoomable:p.PropTypes.bool,zoomOnTouch:p.PropTypes.bool,zoomOnWheel:p.PropTypes.bool,wheelZoomRation:p.PropTypes.number,cropBoxMovable:p.PropTypes.bool,cropBoxResizable:p.PropTypes.bool,toggleDragModeOnDblclick:p.PropTypes.bool,minContainerWidth:p.PropTypes.number,minContainerHeight:p.PropTypes.number,minCanvasWidth:p.PropTypes.number,minCanvasHeight:p.PropTypes.number,minCropBoxWidth:p.PropTypes.number,minCropBoxHeight:p.PropTypes.number,build:p.PropTypes.func,built:p.PropTypes.func,cropstart:p.PropTypes.func,cropmove:p.PropTypes.func,cropend:p.PropTypes.func,crop:p.PropTypes.func,zoom:p.PropTypes.func},b.defaultProps={src:null,dragMode:"crop",data:null,scaleX:1,scaleY:1,enable:!0,zoomTo:1,rotateTo:0},t["default"]=b},950:function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=a(1),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(s,"a",s);var l=a(226),c=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(c,"a",c);var p=(a(930),a(97)),u=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(u,"a",u),a(96),a.d(t,"a",function(){return b});var d=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,a,o,i){var n=t&&t.defaultProps,r=arguments.length-3;if(a||0===r||(a={}),a&&n)for(var s in n)void 0===a[s]&&(a[s]=n[s]);else a||(a=n||{});if(1===r)a.children=i;else if(r>1){for(var l=Array(r),c=0;c<r;c++)l[c]=arguments[c+3];a.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:a,_owner:null}}}(),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),f=(a(150),d("h2",{},void 0,"Create New Project")),v=d("a",{},void 0,"ABOUT THE PROJECT"),m=d("a",{},void 0,"CAST + CREW"),g=d("a",{},void 0,"MEDIA"),b=function(e){function t(e){o(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,e));return a.state={user_id:u.a.load("userId"),pid:""},a}return n(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.ProjectId;this.setState({pid:null===t||void 0===t?"":t})}},{key:"componentDidMount",value:function(){c()(".sidebar h2").click(function(){c()(this).toggleClass("active"),c()(this).next("ul").toggleClass("open")})}},{key:"render",value:function(){return d("div",{className:"sidebar cell"},void 0,f,d("ul",{},void 0,d("li",{className:"Basic Details"===this.props.page?"active":""},void 0,d("a",{href:"/CompletedProjects/BasicDetails/"+this.state.pid},void 0,"BASIC DETAILS")),""===this.state.pid?d("span",{},void 0,d("li",{className:"aboutProject"===this.props.page?"active":""},void 0,v),d("li",{className:"Cast+Crew"===this.props.page?"active":""},void 0,m),d("li",{className:"Media"===this.props.page?"active":""},void 0,g)):d("span",{},void 0,d("li",{className:"aboutProject"===this.props.page?"active":""},void 0,d("a",{href:"/CompletedProjects/aboutProject/"+this.state.pid},void 0,"ABOUT THE PROJECT")),d("li",{className:"Cast+Crew"===this.props.page?"active":""},void 0,d("a",{href:"/CompletedProjects/CastAndCrew/"+this.state.pid},void 0,"CAST + CREW")),d("li",{className:"Media"===this.props.page?"active":""},void 0,d("a",{href:"/CompletedProjects/Media/"+this.state.pid},void 0,"MEDIA")))))}}]),t}(s.a.Component)},976:function(e,t,a){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=a(1),s=r&&r.__esModule?function(){return r["default"]}:function(){return r};a.d(s,"a",s);var l=a(108),c=l&&l.__esModule?function(){return l["default"]}:function(){return l};a.d(c,"a",c);var p=a(224),u=p&&p.__esModule?function(){return p["default"]}:function(){return p};a.d(u,"a",u);var d=a(107),h=d&&d.__esModule?function(){return d["default"]}:function(){return d};a.d(h,"a",h);var f=a(97),v=f&&f.__esModule?function(){return f["default"]}:function(){return f};a.d(v,"a",v);var m=a(96);a.d(t,"a",function(){return w});var g=function(){var e="function"==typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;return function(t,a,o,i){var n=t&&t.defaultProps,r=arguments.length-3;if(a||0===r||(a={}),a&&n)for(var s in n)void 0===a[s]&&(a[s]=n[s]);else a||(a=n||{});if(1===r)a.children=i;else if(r>1){for(var l=Array(r),c=0;c<r;c++)l[c]=arguments[c+3];a.children=l}return{$$typeof:e,type:t,key:void 0===o?null:""+o,ref:null,props:a,_owner:null}}}(),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}(),y=a(150),w=function(e){function t(e){o(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,e));return a.openRoute=function(e){a.props.changeRoute(e)},a.state={user_id:v.a.load("userId"),video_link:"",imgtgs:"",albumDetail:""},a}return n(t,e),b(t,[{key:"handleInputChange",value:function(e,t){var a={};a[e]=t.target.value,this.setState(a),"video_link"==e&&this.isDisabledWebsite(),"imgtgs"==e&&this.validate1()}},{key:"addLink",value:function(){if(!this.validate1()||!this.isDisabledWebsite())return this.validate1(),void this.isDisabledWebsite();var e=this.state.user_id,t=this.state.video_link;if(t.includes("youtube"))var a=t.replace("watch?v=","embed/");else if(t.includes("vimeo"))var a=t.replace("https://vimeo.com/","https://player.vimeo.com/video/");var o=this,i=this.state.imgtgs;if("projects"==this.props.projects){var n={action:"createThumbnail",type:"video",PID:this.props.PID,userId:e,videoUrl:a,origin:"media",Tags:i};y.getSetData(n,function(e){"success"==e.status&&null!=e.TID&&(o.props.close(),o.props.detailvideo(),o.setState({video_link:"",imgtgs:""}))})}else{var n={action:"images",profile_id:this.props.profileId,imgtgs:i,video_link:a,userId:e,album:this.props.albumId};y.getSetData(n,function(e){"success"==e.status&&(o.props.close(),o.props.detailAlbum(),o.setState({video_link:"",imgtgs:""}))})}}},{key:"validateWebsite",value:function(e){var t=/(?:(?:http|https):\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,a=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/;return!!t.test(e)||!!a.test(e)}},{key:"isDisabledWebsite",value:function(){var e=!1;return""===this.state.video_link?this.setState({website_error_text:m.a.videoError1}):this.validateWebsite(this.state.video_link)?(e=!0,this.setState({website_error_text:null})):this.setState({website_error_text:m.a.validF}),e}},{key:"validate1",value:function(){var e=!1;return""==this.state.imgtgs?this.setState({error_text:m.a.videoError2}):(e=!0,this.setState({error_text:null})),e}},{key:"clear",value:function(){this.props.close(),this.setState({video_link:"",imgtgs:"",website_error_text:""})}},{key:"render",value:function(){return g(c.a,{autoDetectWindowHeight:!0,modal:!1,className:"send_new_msg uploadVideoPopup",bodyStyle:{padding:"0px",fontSize:"15px"},open:this.props.open,autoScrollBodyContent:!0},void 0,g("div",{},void 0,g("div",{className:"send_content"},void 0,g("div",{className:"row"},void 0,g("div",{className:"col-xs-12"},void 0,g("span",{className:"photouploader-header"},void 0,m.a.addVideoAl))),g("div",{className:"row"},void 0,g("div",{className:"col-xs-12"},void 0,g("label",{},void 0,m.a.albumVideoTag,"*:"),g("input",{type:"text",placeholder:m.a.alVideoP,className:"input_form msg_profile",value:this.state.video_link,onChange:this.handleInputChange.bind(this,"video_link"),onBlur:this.isDisabledWebsite.bind(this,"video_link")}),g("small",{className:"errorMsg"},void 0,this.state.website_error_text))),g("div",{className:"row"},void 0,g("div",{className:"col-xs-12"},void 0,g("label",{},void 0,m.a.VideoTags,"*:"),g("input",{type:"text",placeholder:m.a.AVTag,className:"input_form msg_profile",value:this.state.imgtgs,onChange:this.handleInputChange.bind(this,"imgtgs"),onBlur:this.validate1.bind(this,"imgtgs")}),g("small",{className:"errorMsg"},void 0,this.state.error_text))),g("div",{className:"row"},void 0,g("div",{className:"col-xs-12"},void 0,g("button",{type:"button",className:"send_btn uploadBtn",onClick:this.addLink.bind(this)},void 0,m.a.addvideo))))),g(h.a,{label:"X",primary:!0,className:"cancelBtnPopup",onTouchTap:this.clear.bind(this)}))}}]),t}(s.a.Component)}});